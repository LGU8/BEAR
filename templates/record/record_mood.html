{% extends "base.html" %}

{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/record_mood.css' %}">
<script src="{% static 'js/record_mood.js' %}"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.ko.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- ë‚ ì§œ ì„ íƒ -->
<div class="record-datepicker" id="date-picker-trigger">
  <span class="record-datepicker-icon">ğŸ“…</span>
  <span class="record-datepicker-text">{{ selected_date }}</span>
  <input type="text" id="date-picker" class="record-datepicker-input" placeholder="ë‚ ì§œ ì„ íƒ">
</div>

<script>
$(function () {
  const defaultDateStr = "{{ selected_date }}";

  $('#date-picker').datepicker({
    format: 'yyyy-mm-dd',
    language: 'ko',
    autoclose: true,
    endDate: new Date(),
    todayHighlight: false,
    orientation: 'bottom left'
  }).on('changeDate', function (e) {
    const selected = e.format('yyyy-mm-dd');

    // í™”ë©´ì— ë³´ì´ëŠ” ë‚ ì§œ ê°±ì‹ 
    $('.report-datepicker-text').text(selected);

    // ì‹¤ì œ í˜ì´ì§€ ì´ë™ (í•„ìš”í•œ ê²½ìš°)
    window.location.search = `?date=${selected}`;
    });

  // ë°” ì „ì²´ í´ë¦­ ì‹œ ë‹¬ë ¥ ì—´ê¸°
  $('#date-picker-trigger').on('click', function () {
      $('#date-picker').datepicker('show');
  });
});

</script>

<!-- ê°ì •-ì •ì„œ ì„ íƒ -->
<div class="record-mood-card">
  <div class="record-mood-title">
    <span>ê°ì • ì„ íƒ</span>
  </div>

  <div class="mood-row">
    <button class="mood-option" data-mood="pos">
      <img src="/static/icons_img/ê¸ì •.png" alt="ê¸ì •">
      <span class="mood-label">ê¸ì •</span>
    </button>

    <button class="mood-option" data-mood="neu">
      <img src="/static/icons_img/ì¤‘ë¦½.png" alt="ì¤‘ë¦½">
      <span class="mood-label">ì¤‘ë¦½</span>
    </button>

    <button class="mood-option" data-mood="neg">
      <img src="/static/icons_img/ë¶€ì •.png" alt="ë¶€ì •">
      <span class="mood-label">ë¶€ì •</span>
    </button>
  </div>
</div>

<!-- ê°ì •-í™œì„±í™” ì„ íƒ -->
<div class="record-mood-card">
  <div class="record-mood-title">
    <span>í™œì„±ë„ ì„ íƒ</span>
  </div>

  <div class="arousal-row">

    <!-- LEFT: ì„ íƒëœ ê°ì • -->
    <div class="selected-mood">
      <img alt="">
      <span class="selected-mood-label"></span>

      <span class="selected-mood-placeholder">ê°ì •ì„ ë¨¼ì € ì„ íƒí•´ ì£¼ì„¸ìš”</span>
    </div>

    <!-- RIGHT: í™œì„±ë„ ë²„íŠ¼ -->
    <div class="arousal-options">
      <button class="arousal-btn low" data-arousal="low">Low</button>
      <button class="arousal-btn med" data-arousal="med">Med</button>
      <button class="arousal-btn high" data-arousal="high">High</button>
    </div>

  </div>
</div>

<!-- ê°ì •-í‚¤ì›Œë“œ ì„ íƒ -->
<div class="record-mood-card">
  <div class="record-mood-title">
    <span>í‚¤ì›Œë“œ ì„ íƒ</span>
  </div>

  <div class="keyword-container">
    <span class="keyword-placeholder">ê°ì •ê³¼ í™œì„±í™”ë¥¼ ë¨¼ì € ì„ íƒí•´ ì£¼ì„¸ìš”</span>
  </div>
</div>

<!-- í•˜ë‹¨ ë²„íŠ¼ -->
<div class="bottom-actions">
  <a href="{% url 'record_app:record_meal' %}" class="bottom-btn primary"> ë‹¤ìŒ </a>
</div>

{% endblock %}
