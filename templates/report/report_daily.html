{% extends "report/report_base.html" %}
{% load static %}

{% block details %}
<!-- 날짜 선택 -->
<div class="report-datepicker">
  <input type="text" id="date-picker" class="form-control" placeholder="날짜 선택">
</div>

<script>
$(function () {
  const defaultDateStr = "{{ selected_date }}";

  $('#date-picker').datepicker({
    format: 'yyyy-mm-dd',
    language: 'ko',
    autoclose: true,
    endDate: new Date(),
    todayHighlight: false
  });

  $('#date-picker').datepicker('update', defaultDateStr);
  });

</script>

<!-- =========================
     오늘의 요약 카드
     ========================= -->
<div class="summary-card">
  <div class="summary-title">
    <span>오늘의 요약</span>
  </div>

  <div class="feedback-card">
    <img class="feedback-ico" src="{% static 'icons_img/bear_report.png' %}" alt="bear feedback">
    <div class="feedback-text">
      오늘은 조금 힘들었겠지만, 긍정적인 기운이 더 많았어. 단백질이 풍부한 식사로 힘을 보충해보자!
      햇살 가득한 저녁이 너를 따뜻하게 감싸줬을 거야.
    </div>
  </div>
</div>

<!-- =========================
     영양소 카드
     ========================= -->
<div class="summary-card">
  <!-- 제목 + 토글 한 줄 -->
  <div class="nutrition-header">
    <span class="nutrition-title">영양소</span>

    <div class="nut-sum-type-toggle">
      <button class="toggle-btn active" data-target="summary">요약</button>
      <span class="divider">|</span>
      <button class="toggle-btn" data-target="detail">자세히</button>
    </div>
  </div>

  <!-- 요약 내용 (기본 노출) -->
  <div class="summary-content">

    <div class="nut-row" data-nutrient="calorie">
      <div class="nut-title">칼로리</div>
      <div class="nut-text"></div>
      <div class="nut-bar"><span></span></div>
    </div>

    <div class="nut-row" data-nutrient="carb">
      <div class="nut-title">탄수화물</div>
      <div class="nut-text"></div>
      <div class="nut-bar"><span></span></div>
    </div>

    <div class="nut-row" data-nutrient="protein">
      <div class="nut-title">단백질</div>
      <div class="nut-text"></div>
      <div class="nut-bar"><span></span></div>
    </div>

    <div class="nut-row" data-nutrient="fat">
      <div class="nut-title">지방</div>
      <div class="nut-text"></div>
      <div class="nut-bar"><span></span></div>
    </div>

  </div>

  <!-- 자세히 내용 -->
  <div class="detail-content">

    <div class="detail-grid">
      <!-- LEFT COLUMN -->
      <div class="detail-left">

        <!-- 식사 선택 -->
        <div class="meal-toggle">
          <img src="/static/icons_img/morning.png"
               class="meal-btn active"
               data-meal="morning"
               alt="아침">
          <img src="/static/icons_img/lunch.png"
               class="meal-btn"
               data-meal="lunch"
               alt="점심">
          <img src="/static/icons_img/dinner.png"
               class="meal-btn"
               data-meal="dinner"
               alt="저녁">
        </div>

        <!-- 메뉴명 -->
        <div class="meal-menu">
          <div class="meal-menu-title">메뉴</div>
          <div class="meal-menu-text">계란후라이, 토스트</div>
        </div>

      </div>

      <!-- RIGHT COLUMN -->
      <div class="detail-right">

        <!-- 도넛 차트 -->
        <div class="meal-donut-wrap">
          <canvas id="macroDonutChart"></canvas>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- =========================
     기분 카드
     ========================= -->
<div class="summary-card">
  <div class="summary-title">
    <span>기분</span>
  </div>

  <div class="detail-grid">
    <!-- LEFT COLUMN -->
    <div class="mood-left">
      <!-- 기분 캐릭터 -->
      <div class="mood_img"></div>
      <!-- 오늘 감정 멘트 -->
      <div class="mood_text"></div>
    </div>

    <!-- RIGHT COLUMN -->
    <div class="mood-right">
      <!-- 도넛 차트 -->
      <div class="mood-donut-wrap">
        <canvas id="moodDonutChart"></canvas>
      </div>
    </div>
  </div>
</div>

{% endblock %}
