{# templates/settings/settings_password.html #}
{% extends "settings/settings_base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/settings/settings_base.css' %}">
<link rel="stylesheet" href="{% static 'css/settings/settings_s2.css' %}">
<link rel="stylesheet" href="{% static 'css/settings/settings_s5.css' %}">
{% endblock %}

{% block extra_js %}
<script defer src="{% static 'js/settings/settings_s5.js' %}"></script>
{% endblock %}

{% block main_area %}
<section class="settings-page">
  <article class="settings-card edit-card password-card">

    <div class="edit-header">
      <a class="back-btn" href="{% url 'settings_app:settings_index' %}" aria-label="back">
        <img class="back-ico" src="{% static 'settings_img/icon_back.png' %}" alt="back">
      </a>
      <div class="edit-title">비밀번호 관리</div>
      <div class="edit-header-spacer"></div>
    </div>

    <div class="pw-avatar">
      <div class="profile-avatar-wrap lg">
        <img class="profile-avatar lg" src="{% static profile_badge_img %}" alt="profile badge">
      </div>

      {# ✅ 정책 문구: 아래 2개 중 하나만 사용 권장 #}
      <div class="pw-avatar-hint">8자 이상, 영문/숫자 조합을 권장해요</div>
      {# <div class="pw-avatar-hint">한글, 영문, 숫자만 가능</div> #}
    </div>

    <form id="pwForm" method="post" action="{% url 'settings_app:settings_password' %}" novalidate>
      {% csrf_token %}

      <div class="pw-block">
        <label class="pw-label" for="curPw">현재 비밀번호</label>
        <input id="curPw" name="current_password" class="pw-input" type="password"
               autocomplete="current-password" placeholder="********" required>
      </div>

      <div class="pw-block">
        <label class="pw-label" for="newPw">변경 비밀번호</label>
        <input id="newPw" name="new_password" class="pw-input" type="password"
               autocomplete="new-password" placeholder="********" required>
        <div class="pw-help">8자 이상, 영문/숫자 포함 권장</div>
      </div>

      <div class="pw-block">
        <label class="pw-label" for="newPw2">변경 비밀번호 재입력</label>
        <input id="newPw2" name="new_password_confirm" class="pw-input" type="password"
               autocomplete="new-password" placeholder="********" required>
      </div>

      <!-- ✅ 서버 에러/성공도 반영 -->
      <div id="pwError" class="pw-error" aria-live="polite">
        {% if error %}{{ error }}{% endif %}
        {% if success %}{{ success }}{% endif %}
      </div>

      <div class="pw-footer">
        <button id="saveBtn" class="save-btn" type="submit" disabled>저장</button>
      </div>
    </form>

  </article>
</section>
{% endblock %}
