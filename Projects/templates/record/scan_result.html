{% extends "record_base_clean.html" %}
{% load static %}
{% block main_area %}

<section class="result-page">

  <input type="hidden" id="ctx-rgs-dt" value="{{ request.session.rgs_dt }}">
  <input type="hidden" id="ctx-seq" value="{{ request.session.seq }}">
  <input type="hidden" id="ctx-time-slot" value="{{ request.session.time_slot }}">


  <!-- 바코드 인식 후보 -->
  <div id="candidate-list"></div>  

  <!-- ✅ mode에 따라 분기 -->
  <!-- 1) BARCODE 결과 패널 -->
  <div id="result-barcode" class="result-panel" style="display:none;">
    
    <!-- 선택된 제품 표시 영역(텍스트/회사명 등) -->
    <div class="selected-product">
      <div id="barcode-product-name" class="product-name"></div>
      <div id="barcode-company-name" class="company-name"></div>
    </div>

    <!-- ✅ 영양 입력/수정 영역 -->
    <div class="nutr-edit">
      <div class="nutr-row">
        <label for="barcode-nutr-kcal">칼로리(kcal)</label>
        <input id="barcode-nutr-kcal" type="number" inputmode="decimal" step="0.01" min="0" placeholder="kcal" />
      </div>

      <div class="nutr-row">
        <label for="barcode-nutr-carb">탄수화물(g)</label>
        <input id="barcode-nutr-carb" type="number" inputmode="decimal" step="0.01" min="0" placeholder="g" />
      </div>

      <div class="nutr-row">
        <label for="barcode-nutr-protein">단백질(g)</label>
        <input id="barcode-nutr-protein" type="number" inputmode="decimal" step="0.01" min="0" placeholder="g" />
      </div>

      <div class="nutr-row">
        <label for="barcode-nutr-fat">지방(g)</label>
        <input id="barcode-nutr-fat" type="number" inputmode="decimal" step="0.01" min="0" placeholder="g" />
      </div>

      <p id="barcode-nutr-error" class="nutr-error" style="display:none;"></p>
    </div>

  </div>
  
  <!-- 2) NUTRITION(OCR) 결과 패널 -->
  <div id="result-nutrition" class="result-panel" style="display:none;">
    
    <!-- 제품명 입력 -->
    <div class="nutr-edit">
      <div class="nutr-row">
        <label for="nutrition-name-input">제품명</label>
        <input
          id="nutrition-name-input"
          type="text"
          placeholder="제품명을 입력하세요"
          required
        />
      </div>

      <!-- ✅ 영양 입력/수정 영역(동일하게 넣어두기) -->
      <div class="nutr-row">
        <label for="nutrition-nutr-kcal">칼로리(kcal)</label>
        <input id="nutrition-nutr-kcal" type="number" inputmode="decimal" step="0.01" min="0" placeholder="kcal" />
      </div>

      <div class="nutr-row">
        <label for="nutrition-nutr-carb">탄수화물(g)</label>
        <input id="nutrition-nutr-carb" type="number" inputmode="decimal" step="0.01" min="0" placeholder="g" />
      </div>

      <div class="nutr-row">
        <label for="nutrition-nutr-protein">단백질(g)</label>
        <input id="nutrition-nutr-protein" type="number" inputmode="decimal" step="0.01" min="0" placeholder="g" />
      </div>

      <div class="nutr-row">
        <label for="nutrition-nutr-fat">지방(g)</label>
        <input id="nutrition-nutr-fat" type="number" inputmode="decimal" step="0.01" min="0" placeholder="g" />
      </div>

      <p id="nutrition-nutr-error" class="nutr-error" style="display:none;"></p>
    </div>

  </div>
  

  <!-- 저장 -->
  <div class="result-actions">
    <button type="button" id="btn-save" class="btn-save" disabled>저장</button>
  </div>

</section>

<script defer src="{% static 'js/result.js' %}"></script>
{% endblock %}
