{% extends "record_base_clean.html" %}

{% load static %}

{% block main_area %}

<form style="display:none;">
  {% csrf_token %}
</form>

<section class="record-wrap">

  <input type="hidden" id="ctx-rgs-dt" value="{{ request.session.rgs_dt }}">
  <input type="hidden" id="ctx-seq" value="{{ request.session.seq }}">
  <input type="hidden" id="ctx-time-slot" value="{{ request.session.time_slot }}">

  <!-- 식단 기록 카드 -->
  <section class="panel">
    <div class="panel-head">
      <h2 class="panel-title">식단 기록</h2>
      {% load static %}
      <a id="btn-camera" class="camera-btn" href="{% url 'record_app:camera' %}" aria-label="카메라">
        <img class="camera-ico" src="{% static 'record_img/dslr-camera.png' %}" alt="카메라">
      </a>
    </div>

<!--    &lt;!&ndash; 최근 3개 끼니 카드 &ndash;&gt;-->
<!--    <div id="recent-cards" class="cards-3">-->
<!--      <article class="meal-card empty">-->
<!--        <div class="meal-card-img"></div>-->
<!--        <div class="meal-card-text">아직 기록 전입니다.<br>기록을 남겨보세요!</div>-->
<!--      </article>-->
<!--      <article class="meal-card empty">-->
<!--        <div class="meal-card-img"></div>-->
<!--        <div class="meal-card-text">아직 기록 전입니다.<br>기록을 남겨보세요!</div>-->
<!--      </article>-->
<!--      <article class="meal-card empty">-->
<!--        <div class="meal-card-img"></div>-->
<!--        <div class="meal-card-text">아직 기록 전입니다.<br>기록을 남겨보세요!</div>-->
<!--      </article>-->
<!--    </div>-->

<!--    <div class="recipe-row">-->
<!--      <a id="btn-my-recipe" class="recipe-pill" href="#">나의 레시피 가져오기</a>-->
<!--    </div>-->

    <div class="search-row">
      <input id="food-search-input" class="search-input" type="text" placeholder="검색 내용을 입력하세요.">
      <button id="food-search-btn" class="search-btn" type="button">Search</button>
    </div>

    <div id="selected-bar" class="selected-bar" aria-live="polite">
        <span class="selected-bar-empty">선택된 메뉴가 없습니다.</span>
    </div>

    <div id="selected-summary" class="selected-summary" aria-live="polite">
      <div class="selected-summary-title">선택 합계</div>
      <div class="selected-summary-values">
        <span id="sum-kcal">0</span> kcal ·
        탄수화물 <span id="sum-carb">0</span>g ·
        단백질 <span id="sum-protein">0</span>g ·
        지방 <span id="sum-fat">0</span>g
      </div>
    </div>

<!--    <input type="hidden" id="ctx-reco-kcal" value="{{ recommended_kcal|default:0 }}">-->

    <div id="kcal-progress" class="kcal-progress" aria-live="polite">
      <div class="kcal-progress-top">
        <div class="kcal-progress-title">권장 칼로리 대비</div>
        <div class="kcal-progress-text">
          <span id="kcal-percent">0</span>% ·
          <span id="kcal-now">0</span>/<span id="kcal-reco">0</span> kcal
        </div>
      </div>
      <div class="kcal-progress-bar" role="progressbar"
           aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
        <div id="kcal-progress-fill" class="kcal-progress-fill"></div>
      </div>
    </div>

    <div class="table-wrap">
      <table class="food-table">
        <thead>
          <tr>
            <th class="col-check">선택</th><th>제품명</th><th>칼로리</th><th>탄</th><th>단</th><th>지</th>
          </tr>
        </thead>
        <tbody id="record-items-tbody"></tbody>
      </table>
    </div>
  </section>

  <!-- 하단 버튼 -->
  <div class="bottom-actions">
    <button id="btn-prev" class="bottom-btn" type="button">이전</button>
    <button id="btn-save-meal" class="bottom-btn primary" type="button">저장</button>
  </div>

</section>

<script defer src="{% static 'js/record_state.js' %}"></script>
<script defer src="{% static 'js/record_food/food_search.js' %}"></script>
{% endblock %}
